<!DOCTYPE html>
{% load static %}
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/loginn.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
    <link rel="icon" href="{% static 'img/LOGO.png' %}">
    <script src="https://kit.fontawesome.com/8f7f0e63ef.js" crossorigin="anonymous"></script>
    <title>Cadastro</title>
</head>

<body class="sign-up-js">
    <div class="container">
        <a class="logo" href="{% url 'inicial' %}"> <img id="img-logo" src="{% static 'img/uu.png' %}" alt=""></a>
        <div class="content first-content"> <!--Essa div contém toda parte do login-->
            <div class="first-column">
                <h2 class="tittle tittle-primary">Bem-vindo de volta</h2>
                <p class="description">Para se manter conectado conosco</p>
                <p class="description description-primary">Por favor faça o login com as suas informações pessoais</p>
                <a href="{% url 'login' %}"><button id="signin" class="btn btn-primary">Entrar</button></a>
            </div> <!--Fim da div first column-->

            <div class="second-column">
                <h2 class="tittle tittle-second">Criar Conta</h2>

                <div class="social-media"> <!-- Menu da redes sociais -->
                    <ul class="list-social-media">
                        <a href="" class="link-social-media">
                            <li class="item-social-media">
                                <i class="fa-brands fa-facebook-f"></i>
                            </li>
                        </a>
                        <a href="" class="link-social-media">
                            <li class="item-social-media">
                                <i class="fa-brands fa-google-plus-g"></i>
                            </li>
                        </a>
                        <a href="#" class="link-social-media">
                            <li class="item-social-media">
                                <i class="fa-brands fa-linkedin-in"></i>
                            </li>
                        </a>
                    </ul>
                </div> <!-- Fim da div -->


                <form action="" class="form" method="POST">
                    {% csrf_token %}

                    <label class="label-input" for="nome">

                        <input type="text" id="nome" name="nome" placeholder="Nome">
                    </label>

                    <label class="label-input" for="email">
                        <input type="email" name="email" id="email" placeholder="E-mail">
                    </label>


                    <label class="label-input" for="senha">
                        <input type="password" name="senha" id="senha" placeholder="Senha">
                    </label>

                    <label for="telefone" class="label-input">
                        <input type="text" id="telefone" name="telefone" placeholder="Telefone"></label>


                    <label for="cpf">
                        <input type="text" id="cpf" name="cpf" placeholder="CPF"></label>

                    <label style="display: flex; flex-direction: column;" for="tipo_sang">
                        <select id="tipo_sang" name="tipo_sang" required>
                            <option value="">Tipo Sanguineo</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </label>

                    <label for="Sexo"></label>
                    <select id="sexo" name="sexo">
                        <option value="">Sexo</option>
                        <option value="Masculino">Masculino</option>
                        <option value="Feminino">Feminino</option>
                    </select>

                    <label for="peso">
                        <input type="text" id="peso" name="peso" placeholder="Peso"></label>


                    <label for="cep">
                       <input type="text" id="cep" name="cep" placeholder="CEP"
                        oninput="mascaraCEP()">

                    </label>
                    <label class="label-input none" for="endereco">
                        <input type="text" name="endereco" id="endereco" placeholder="Endereço">
                    </label>
                    <label class="label-input none" for="bairro">
                        <input type="text" name="bairro" id="bairro" placeholder="Bairro">
                    </label>
                    <label class="label-input none" for="cidade">
                        <input type="text" name="cidade" id="cidade" placeholder="Cidade">
                    </label>
                    <label class="label-input none" for="uf">
                        <input type="text" name="uf" id="uf" placeholder="UF">
                    </label>
                    <button type="submit" class="btn btn-second">Cadastrar</button>
                </form>
            </div> <!-- Fim da div second column -->
        </div> <!-- Fim da div first content -->

        <div class="content second-content"><!-- Essa div contém toda parte do cadastro -->
            <div class="first-column">
                <h2 class="tittle tittle-primary">Olá amigo</h2>
                <p class="description description-primary">Insira os seus dados pessoais</p>
                <p class="description description-primary">e entre agora!</p>
                <button id="signup" class="btn btn-primary">Cadastrar</button>
            </div> <!--Fim da div first column-->

            <div class="second-column">
                <h2 class="tittle tittle-second">Entre na sua conta</h2>

                <div class="social-media"> <!-- Menu da redes sociais -->
                    <ul class="list-social-media">
                        <a href="" class="link-social-media">
                            <li class="item-social-media">
                                <i class="fa-brands fa-facebook-f"></i>
                            </li>
                        </a>
                        <a href="" class="link-social-media">
                            <li class="item-social-media">
                                <i class="fa-brands fa-google-plus-g"></i>
                            </li>
                        </a>
                        <a href="#" class="link-social-media">
                            <li class="item-social-media">
                                <i class="fa-brands fa-linkedin-in"></i>
                            </li>
                        </a>
                    </ul>
                </div> <!-- Fim da div -->
                <form action="" class="form" method="POST">
                    {% csrf_token %}
                    <label class="label-input" for="cpf">
                        <i class="fa-regular fa-envelope icon-modify"></i>
                        <input type="cpf" name="cpf"  placeholder="CPF">
                    </label>

                    <label class="label-input" for="senha">
                        <i class="fa-solid fa-lock icon-modify"></i>
                        <input type="password" name="senha"  placeholder="Senha">
                    </label>

                    <a href="#" class="password">Esqueceu sua senha?</a>
                    <button type="button" class="btn btn-second">Entrar</button>
                </form>
            </div> <!-- Fim da div second column -->
        </div> <!--Fim da second content -->
    </div> <!-- Fim da div pai(container) -->
    <script>
        var btnSignin = document.querySelector('#signin');
        var btnSignup = document.querySelector('#signup');

        var body = document.querySelector('body');
        var logo = document.querySelector('#img-logo')

        btnSignin.addEventListener('click', function () {
            body.className = 'sign-in-js';
            logo.src='img/LOGO.png';
            
        })
        
        btnSignup.addEventListener('click', function () {
            body.className = 'sign-up-js';
            logo.src='img/uu.png';
        })

    </script>
    <script>
         // Função para formatar o CEP (adiciona o hífen automaticamente)
        function formatarCEP(cep) {
            return cep.replace(/\D/g, "") // Remove todos os caracteres não numéricos
                      .replace(/^(\d{5})(\d{3})$/, "$1-$2"); // Formata como 00000-000
        }

        // Função para buscar o endereço com base no CEP
        function buscarEndereco() {
            var cep = document.getElementById("cep").value.replace("-", ""); // Remove o hífen do CEP para enviar à API
            if (cep.length === 8) {  // Verifica se o CEP tem 8 caracteres
                var url = `https://viacep.com.br/ws/${cep}/json/`; // URL da API ViaCEP
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        if (data.erro) {
                            alert("CEP não encontrado!");
                        } else {
                            // Preenche os campos de endereço e bairro
                            document.getElementById("endereco").value = data.logradouro;
                            document.getElementById("bairro").value = data.bairro;
                            document.getElementById("cidade").value = data.localidade;
                            document.getElementById("uf").value = data.uf;
                        }
                    })
                    .catch(error => alert("Erro ao buscar o endereço!"));
            } else {
                alert("Digite um CEP válido com 8 dígitos.");
            }
        }

        // Função que é chamada quando o usuário digitar no campo CEP
        function mascaraCEP() {
            var cep = document.getElementById("cep").value;
            document.getElementById("cep").value = formatarCEP(cep);
        }

        // Chama a busca automaticamente quando o CEP tem 8 dígitos
        document.getElementById("cep").addEventListener("input", () => {
            const cep = document.getElementById("cep").value.replace("-", "");
            if (cep.length === 8) {
                buscarEndereco();
            }
        });

        // Chama a busca ao clicar em qualquer parte do formulário
        document.getElementById("formulario").addEventListener("click", () => {
            const cep = document.getElementById("cep").value.replace("-", "");
            if (cep.length === 8) {
                buscarEndereco();
            }
        });
    </script>
</body>

</html>